---
import About from "@components/About.astro";
import AditionalWorks from "@components/AditionalWorks.astro";
import Contact from "@components/Contact.astro";
import FeatureProjects from "@components/FeaturedProjects.astro";
import Hero from "@components/Hero.astro";
import type { languages } from "@i18n/ui";
import { useTranslations } from "@i18n/utils";
import Layout from "@layouts/Layout.astro";
import { getCollection } from "astro:content";

const projects = await getCollection("project");

const featuredProjects = projects?.slice(0, 3);
const aditionalProjects = projects?.slice(3);

const lang = Astro.currentLocale || "en";
const translateUi = useTranslations(lang as keyof typeof languages);
---

<Layout>
  <main>
    <Hero lang={lang} translate={translateUi}/>
    <About translate={translateUi}/>
    <FeatureProjects lang={lang as keyof typeof languages} translate={translateUi} featuredProjects={featuredProjects} />
    <AditionalWorks lang={lang as keyof typeof languages} translate={translateUi} aditionalProjects={aditionalProjects} />
    <Contact translate={translateUi}/>
  </main>
</Layout>
